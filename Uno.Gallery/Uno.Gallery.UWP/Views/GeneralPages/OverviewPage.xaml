<Page x:Class="Uno.Gallery.Views.GeneralPages.OverviewPage"
	  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	  xmlns:local="using:Uno.Gallery.Views.GeneralPages"
	  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	  xmlns:android="http:/uno.ui/android"
	  xmlns:converters="using:Uno.Gallery.Converters"
	  xmlns:gallery="using:Uno.Gallery"
	  xmlns:ios="http:/uno.ui/ios"
	  xmlns:todo="what should be done"
	  xmlns:wasm="http:/uno.ui/wasm"
	  xmlns:win="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	  xmlns:xamarin="http:/uno.ui/xamarin"
	  mc:Ignorable="d todo android ios wasm xamarin"
	  Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

	<Page.Resources>
		<converters:EnumDesignConverter x:Key="DesignToIconConverter"
										MaterialValue="ms-appx:///Assets/MaterialIcon_Small.png"
										FluentValue="ms-appx:///Assets/FluentIcon_Small.png"
										android:NativeValue="ms-appx:///Assets/AndroidIcon_Small.png"
										ios:NativeValue="ms-appx:///Assets/AppleIcon_Small.png" />

		<ItemsPanelTemplate x:Key="HorizontalItemsStackPanelTemplate">
			<StackPanel Orientation="Horizontal"
						Spacing="16" />
		</ItemsPanelTemplate>
	</Page.Resources>

	<ScrollViewer HorizontalScrollMode="Disabled"
				  VerticalScrollMode="Enabled">
		<StackPanel Margin="24,16">
			<!-- Text -->
			<TextBlock Text="Build native mobile, desktop and WebAssembly apps from a single codebase."
					   TextWrapping="WrapWholeWords"
					   Style="{StaticResource MaterialHeadline4}" />
			<TextBlock Text="Here's an overview of the vailable components Uno Platform from a Material or Fluent perspective."
					   TextWrapping="WrapWholeWords"
					   Style="{StaticResource MaterialSubtitle1}" />

			<!-- Colors -->
			<TextBlock Text="Colors"
					   Margin="0,16,0,0"
					   Style="{StaticResource MaterialHeadline5}" />
			<ScrollViewer HorizontalScrollMode="Enabled"
						  HorizontalScrollBarVisibility="Auto"
						  VerticalScrollMode="Disabled"
						  Margin="0,16,0,0">
				<ItemsControl ItemsSource="{x:Bind ColorSamples}"
							  ItemsPanel="{StaticResource HorizontalItemsStackPanelTemplate}"
							  todo:note="extra margin to prevent scrollbar blocking content"
							  wasm:Margin="0,0,0,24"
							  win:Margin="0,0,0,24">
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<Border CornerRadius="4"
									BorderBrush="LightGray"
									BorderThickness="1"
									MaxWidth="240"
									Padding="24">
								<StackPanel>
									<TextBlock Text="todo:Icon" />
									<TextBlock Text="{Binding Title}"
											   Style="{StaticResource MaterialHeadline6}" />
									<TextBlock Text="{Binding Description}"
											   TextWrapping="WrapWholeWords"
											   Visibility="{Binding Description, Converter={StaticResource IsNullOrEmptyToCollapsed}, FallbackValue=Collapsed}"
											   Style="{StaticResource MaterialBody2}" />
									<Button Content="{Binding OverviewCtaText, FallbackValue='View'}"
											Click="OverviewPage_Click"
											Padding="0"
											Style="{StaticResource MaterialTextButtonStyle}" />
								</StackPanel>
							</Border>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>
			</ScrollViewer>

			<!-- Components -->
			<TextBlock Text="Components"
					   Margin="0,16,0,0"
					   Style="{StaticResource MaterialHeadline5}" />
			<ListView x:Name="ComponentSelector"
					  ItemsSource="{x:Bind ComponentSamples, Mode=OneWay}"
					  SelectionMode="Single"
					  todo:IsSynchronizedWithCurrentItem="just crashes on windows"
					  todo:SelectedItem="doesnt work on windows"
					  xamarin:SelectedItem="{x:Bind SelectedComponent}"
					  win:SelectedIndex="{x:Bind SelectedComponentIndex}"
					  Margin="0,16,0,0">
				<ListView.ItemContainerStyle>
					<Style TargetType="ListViewItem">
						<Setter Property="BorderThickness" Value="0,0,0,2" />

						<Setter Property="Template">
							<Setter.Value>
								<ControlTemplate TargetType="ListViewItem">
									<Border x:Name="LayoutRoot"
											BorderThickness="{TemplateBinding BorderThickness}"
											Opacity="0.8">
										<ContentPresenter Content="{TemplateBinding Content}"
														  ContentTemplate="{TemplateBinding ContentTemplate}" />

										<VisualStateManager.VisualStateGroups>
											<VisualStateGroup x:Name="CommonStates">
												<VisualState x:Name="Normal" />
												<VisualState x:Name="PointerOver">
													<VisualState.Setters>
														<Setter Target="LayoutRoot.Opacity" Value="1" />
													</VisualState.Setters>
												</VisualState>
												<VisualState x:Name="Pressed">
													<VisualState.Setters>
														<Setter Target="LayoutRoot.Opacity" Value="1" />
													</VisualState.Setters>
												</VisualState>
												<VisualState x:Name="Selected">
													<VisualState.Setters>
														<Setter Target="LayoutRoot.BorderBrush" Value="{StaticResource MaterialPrimaryBrush}" />
													</VisualState.Setters>
												</VisualState>
												<VisualState x:Name="SelectedUnfocused">
													<VisualState.Setters>
														<Setter Target="LayoutRoot.BorderBrush" Value="{StaticResource MaterialPrimaryBrush}" />
													</VisualState.Setters>
												</VisualState>
												<VisualState x:Name="SelectedDisabled">
													<VisualState.Setters>
														<Setter Target="LayoutRoot.BorderBrush" Value="{StaticResource MaterialPrimaryBrush}" />
													</VisualState.Setters>
												</VisualState>
												<VisualState x:Name="SelectedPointerOver">
													<VisualState.Setters>
														<Setter Target="LayoutRoot.Opacity" Value="1" />
														<Setter Target="LayoutRoot.BorderBrush" Value="{StaticResource MaterialPrimaryBrush}" />
													</VisualState.Setters>
												</VisualState>
												<VisualState x:Name="SelectedPressed">
													<VisualState.Setters>
														<Setter Target="LayoutRoot.Opacity" Value="1" />
														<Setter Target="LayoutRoot.BorderBrush" Value="{StaticResource MaterialPrimaryBrush}" />
													</VisualState.Setters>
												</VisualState>
											</VisualStateGroup>
										</VisualStateManager.VisualStateGroups>
									</Border>
								</ControlTemplate>
							</Setter.Value>
						</Setter>
					</Style>
				</ListView.ItemContainerStyle>
				<ListView.ItemTemplate>
					<DataTemplate>
						<StackPanel Orientation="Horizontal">
							<TextBlock Text="{Binding Key}"
									   Style="{StaticResource MaterialHeadline6}" />
							<Image Source="{Binding Key, Converter={StaticResource DesignToIconConverter}}"
								   Stretch="None"
								   Height="16"
								   Width="16"
								   Margin="10,0,0,0"
								   VerticalAlignment="Center" />
						</StackPanel>
					</DataTemplate>
				</ListView.ItemTemplate>
				<ListView.ItemsPanel>
					<ItemsPanelTemplate>
						<!-- android: ItemsStackPanel would take infinite height if used here -->
						<StackPanel Orientation="Horizontal"
									BorderBrush="LightGray"
									BorderThickness="0,0,0,1"
									Spacing="16" />
					</ItemsPanelTemplate>
				</ListView.ItemsPanel>
			</ListView>
			<ItemsControl ItemsSource="{Binding ElementName=ComponentSelector, Path=SelectedItem.Value}"
						  HorizontalContentAlignment="Left"
						  Margin="0,16,0,0">
				<ItemsControl.ItemTemplate>
					<DataTemplate todo:DataType="local:OverviewPage+ComponentSampleInfo">
						<Grid CornerRadius="4"
							  BorderBrush="LightGray"
							  BorderThickness="1"
							  Margin="0,24,0,0">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="160" />
								<ColumnDefinition Width="*" />
							</Grid.ColumnDefinitions>

							<StackPanel Grid.Column="0"
										Padding="16">
								<TextBlock Text="{Binding Sample.Title}"
										   TextWrapping="Wrap"
										   Style="{StaticResource MaterialHeadline6}" />
								<TextBlock Text="{Binding Sample.Description}"
										   TextWrapping="WrapWholeWords"
										   Style="{StaticResource MaterialBody2}" />
								<Button Content="View component"
										Click="OverviewPage_Click"
										Padding="0"
										Style="{StaticResource MaterialTextButtonStyle}" />
							</StackPanel>
							<Border Grid.Column="1"
									Background="WhiteSmoke"
									Padding="16">
								<ContentControl Content="{Binding}"
												ContentTemplate="{Binding ExampleTemplate}"
												HorizontalAlignment="Stretch"
												HorizontalContentAlignment="Stretch"
												VerticalAlignment="Stretch"
												VerticalContentAlignment="Top" />
							</Border>

							<!-- todo: Minimum width to display example >= 240px * 2 -->
						</Grid>
					</DataTemplate>
				</ItemsControl.ItemTemplate>
			</ItemsControl>
		</StackPanel>
	</ScrollViewer>
</Page>
