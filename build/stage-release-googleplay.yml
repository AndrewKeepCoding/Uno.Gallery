jobs:
- job:  Publish_GooglePlay_Android
  pool: $(windowsPoolName)

  container: nventive/build-agent:vs16.6.0

  variables:
  - group: 'Uno Gallery Google Play Variables' # Import all variables for the signing from the library in azure devops
  
  steps:
  - checkout: none

  - task: DownloadBuildArtifacts@0
    inputs:
      buildType: current
      downloadType: single
      artifactName: $(AndroidArtifactName)

  - task: GooglePlayReleaseBundle@3
    displayName: 'Publish to PlayStore internal track'
    inputs:
      serviceConnection: 'Uno Gallery Google Play'
      bundleFile: '$(System.ArtifactsDirectory)/$(AndroidArtifactName)/*.demo-Signed.aab'
      applicationId: '$(AndroidApplicationId)'
      languageCode: 'en-CA'